{"ast":null,"code":"/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @providesModule ListView\n * \n * @format\n */\n'use strict';\n\nvar _Object$assign = require(\"@babel/runtime-corejs2/core-js/object/assign\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\");\n\nvar _Object$getOwnPropertySymbols = require(\"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\");\n\nvar _Object$keys = require(\"@babel/runtime-corejs2/core-js/object/keys\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _ListViewDataSource = _interopRequireDefault(require(\"./ListViewDataSource\"));\n\nvar _Platform = _interopRequireDefault(require(\"../../../exports/Platform\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _findNodeHandle = _interopRequireDefault(require(\"../../../exports/findNodeHandle\"));\n\nvar _NativeModules = _interopRequireDefault(require(\"../../../exports/NativeModules\"));\n\nvar _ScrollView = _interopRequireDefault(require(\"../../../exports/ScrollView\"));\n\nvar _ScrollResponder = _interopRequireDefault(require(\"../../../modules/ScrollResponder\"));\n\nvar _StaticRenderer = _interopRequireDefault(require(\"../StaticRenderer\"));\n\nvar _reactTimerMixin = _interopRequireDefault(require(\"react-timer-mixin\"));\n\nvar _View = _interopRequireDefault(require(\"../../../exports/View\"));\n\nvar _cloneReferencedElement = _interopRequireDefault(require(\"./cloneReferencedElement\"));\n\nvar _createReactClass = _interopRequireDefault(require(\"create-react-class\"));\n\nvar _isEmpty = _interopRequireDefault(require(\"../isEmpty\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n\n  var sourceKeys = _Object$keys(source);\n\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    var ownKeys = _Object$keys(source);\n\n    if (typeof _Object$getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(_Object$getOwnPropertySymbols(source).filter(function (sym) {\n        return _Object$getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    _Object$defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar merge = function merge() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return _Object$assign.apply(Object, [{}].concat(args));\n};\n\nvar RCTScrollViewManager = _NativeModules.default.ScrollViewManager;\nvar DEFAULT_PAGE_SIZE = 1;\nvar DEFAULT_INITIAL_ROWS = 10;\nvar DEFAULT_SCROLL_RENDER_AHEAD = 1000;\nvar DEFAULT_END_REACHED_THRESHOLD = 1000;\nvar DEFAULT_SCROLL_CALLBACK_THROTTLE = 50;\n/**\n * DEPRECATED - use one of the new list components, such as [`FlatList`](docs/flatlist.html)\n * or [`SectionList`](docs/sectionlist.html) for bounded memory use, fewer bugs,\n * better performance, an easier to use API, and more features. Check out this\n * [blog post](https://facebook.github.io/react-native/blog/2017/03/13/better-list-views.html)\n * for more details.\n *\n * ListView - A core component designed for efficient display of vertically\n * scrolling lists of changing data. The minimal API is to create a\n * [`ListView.DataSource`](docs/listviewdatasource.html), populate it with a simple\n * array of data blobs, and instantiate a `ListView` component with that data\n * source and a `renderRow` callback which takes a blob from the data array and\n * returns a renderable component.\n *\n * Minimal example:\n *\n * ```\n * class MyComponent extends Component {\n *   constructor() {\n *     super();\n *     const ds = new ListView.DataSource({rowHasChanged: (r1, r2) => r1 !== r2});\n *     this.state = {\n *       dataSource: ds.cloneWithRows(['row 1', 'row 2']),\n *     };\n *   }\n *\n *   render() {\n *     return (\n *       <ListView\n *         dataSource={this.state.dataSource}\n *         renderRow={(rowData) => <Text>{rowData}</Text>}\n *       />\n *     );\n *   }\n * }\n * ```\n *\n * ListView also supports more advanced features, including sections with sticky\n * section headers, header and footer support, callbacks on reaching the end of\n * the available data (`onEndReached`) and on the set of rows that are visible\n * in the device viewport change (`onChangeVisibleRows`), and several\n * performance optimizations.\n *\n * There are a few performance operations designed to make ListView scroll\n * smoothly while dynamically loading potentially very large (or conceptually\n * infinite) data sets:\n *\n *  * Only re-render changed rows - the rowHasChanged function provided to the\n *    data source tells the ListView if it needs to re-render a row because the\n *    source data has changed - see ListViewDataSource for more details.\n *\n *  * Rate-limited row rendering - By default, only one row is rendered per\n *    event-loop (customizable with the `pageSize` prop). This breaks up the\n *    work into smaller chunks to reduce the chance of dropping frames while\n *    rendering rows.\n */\n\nvar ListView = (0, _createReactClass.default)({\n  displayName: 'ListView',\n  _childFrames: [],\n  _sentEndForContentLength: null,\n  _scrollComponent: null,\n  _prevRenderedRowsCount: 0,\n  _visibleRows: {},\n  scrollProperties: {},\n  mixins: [_ScrollResponder.default.Mixin, _reactTimerMixin.default],\n  statics: {\n    DataSource: _ListViewDataSource.default\n  },\n\n  /**\n   * You must provide a renderRow function. If you omit any of the other render\n   * functions, ListView will simply skip rendering them.\n   *\n   * - renderRow(rowData, sectionID, rowID, highlightRow);\n   * - renderSectionHeader(sectionData, sectionID);\n   */\n  propTypes: _objectSpread({}, _ScrollView.default.propTypes, {\n    /**\n     * An instance of [ListView.DataSource](docs/listviewdatasource.html) to use\n     */\n    dataSource: _propTypes.default.instanceOf(_ListViewDataSource.default).isRequired,\n\n    /**\n     * (sectionID, rowID, adjacentRowHighlighted) => renderable\n     *\n     * If provided, a renderable component to be rendered as the separator\n     * below each row but not the last row if there is a section header below.\n     * Take a sectionID and rowID of the row above and whether its adjacent row\n     * is highlighted.\n     */\n    renderSeparator: _propTypes.default.func,\n\n    /**\n     * (rowData, sectionID, rowID, highlightRow) => renderable\n     *\n     * Takes a data entry from the data source and its ids and should return\n     * a renderable component to be rendered as the row. By default the data\n     * is exactly what was put into the data source, but it's also possible to\n     * provide custom extractors. ListView can be notified when a row is\n     * being highlighted by calling `highlightRow(sectionID, rowID)`. This\n     * sets a boolean value of adjacentRowHighlighted in renderSeparator, allowing you\n     * to control the separators above and below the highlighted row. The highlighted\n     * state of a row can be reset by calling highlightRow(null).\n     */\n    renderRow: _propTypes.default.func.isRequired,\n\n    /**\n     * How many rows to render on initial component mount. Use this to make\n     * it so that the first screen worth of data appears at one time instead of\n     * over the course of multiple frames.\n     */\n    initialListSize: _propTypes.default.number.isRequired,\n\n    /**\n     * Called when all rows have been rendered and the list has been scrolled\n     * to within onEndReachedThreshold of the bottom. The native scroll\n     * event is provided.\n     */\n    onEndReached: _propTypes.default.func,\n\n    /**\n     * Threshold in pixels (virtual, not physical) for calling onEndReached.\n     */\n    onEndReachedThreshold: _propTypes.default.number.isRequired,\n\n    /**\n     * Number of rows to render per event loop. Note: if your 'rows' are actually\n     * cells, i.e. they don't span the full width of your view (as in the\n     * ListViewGridLayoutExample), you should set the pageSize to be a multiple\n     * of the number of cells per row, otherwise you're likely to see gaps at\n     * the edge of the ListView as new pages are loaded.\n     */\n    pageSize: _propTypes.default.number.isRequired,\n\n    /**\n     * () => renderable\n     *\n     * The header and footer are always rendered (if these props are provided)\n     * on every render pass. If they are expensive to re-render, wrap them\n     * in StaticContainer or other mechanism as appropriate. Footer is always\n     * at the bottom of the list, and header at the top, on every render pass.\n     * In a horizontal ListView, the header is rendered on the left and the\n     * footer on the right.\n     */\n    renderFooter: _propTypes.default.func,\n    renderHeader: _propTypes.default.func,\n\n    /**\n     * (sectionData, sectionID) => renderable\n     *\n     * If provided, a header is rendered for this section.\n     */\n    renderSectionHeader: _propTypes.default.func,\n\n    /**\n     * (props) => renderable\n     *\n     * A function that returns the scrollable component in which the list rows\n     * are rendered. Defaults to returning a ScrollView with the given props.\n     */\n    renderScrollComponent: _propTypes.default.func.isRequired,\n\n    /**\n     * How early to start rendering rows before they come on screen, in\n     * pixels.\n     */\n    scrollRenderAheadDistance: _propTypes.default.number.isRequired,\n\n    /**\n     * (visibleRows, changedRows) => void\n     *\n     * Called when the set of visible rows changes. `visibleRows` maps\n     * { sectionID: { rowID: true }} for all the visible rows, and\n     * `changedRows` maps { sectionID: { rowID: true | false }} for the rows\n     * that have changed their visibility, with true indicating visible, and\n     * false indicating the view has moved out of view.\n     */\n    onChangeVisibleRows: _propTypes.default.func,\n\n    /**\n     * A performance optimization for improving scroll perf of\n     * large lists, used in conjunction with overflow: 'hidden' on the row\n     * containers. This is enabled by default.\n     */\n    removeClippedSubviews: _propTypes.default.bool,\n\n    /**\n     * Makes the sections headers sticky. The sticky behavior means that it\n     * will scroll with the content at the top of the section until it reaches\n     * the top of the screen, at which point it will stick to the top until it\n     * is pushed off the screen by the next section header. This property is\n     * not supported in conjunction with `horizontal={true}`. Only enabled by\n     * default on iOS because of typical platform standards.\n     */\n    stickySectionHeadersEnabled: _propTypes.default.bool,\n\n    /**\n     * An array of child indices determining which children get docked to the\n     * top of the screen when scrolling. For example, passing\n     * `stickyHeaderIndices={[0]}` will cause the first child to be fixed to the\n     * top of the scroll view. This property is not supported in conjunction\n     * with `horizontal={true}`.\n     */\n    stickyHeaderIndices: _propTypes.default.arrayOf(_propTypes.default.number).isRequired,\n\n    /**\n     * Flag indicating whether empty section headers should be rendered. In the future release\n     * empty section headers will be rendered by default, and the flag will be deprecated.\n     * If empty sections are not desired to be rendered their indices should be excluded from sectionID object.\n     */\n    enableEmptySections: _propTypes.default.bool\n  }),\n\n  /**\n   * Exports some data, e.g. for perf investigations or analytics.\n   */\n  getMetrics: function getMetrics() {\n    return {\n      contentLength: this.scrollProperties.contentLength,\n      totalRows: this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount(),\n      renderedRows: this.state.curRenderedRowsCount,\n      visibleRows: _Object$keys(this._visibleRows).length\n    };\n  },\n\n  /**\n   * Provides a handle to the underlying scroll responder.\n   * Note that `this._scrollComponent` might not be a `ScrollView`, so we\n   * need to check that it responds to `getScrollResponder` before calling it.\n   */\n  getScrollResponder: function getScrollResponder() {\n    if (this._scrollComponent && this._scrollComponent.getScrollResponder) {\n      return this._scrollComponent.getScrollResponder();\n    }\n  },\n  getScrollableNode: function getScrollableNode() {\n    if (this._scrollComponent && this._scrollComponent.getScrollableNode) {\n      return this._scrollComponent.getScrollableNode();\n    } else {\n      return (0, _findNodeHandle.default)(this._scrollComponent);\n    }\n  },\n\n  /**\n   * Scrolls to a given x, y offset, either immediately or with a smooth animation.\n   *\n   * See `ScrollView#scrollTo`.\n   */\n  scrollTo: function scrollTo() {\n    if (this._scrollComponent && this._scrollComponent.scrollTo) {\n      var _this$_scrollComponen;\n\n      (_this$_scrollComponen = this._scrollComponent).scrollTo.apply(_this$_scrollComponen, arguments);\n    }\n  },\n\n  /**\n   * If this is a vertical ListView scrolls to the bottom.\n   * If this is a horizontal ListView scrolls to the right.\n   *\n   * Use `scrollToEnd({animated: true})` for smooth animated scrolling,\n   * `scrollToEnd({animated: false})` for immediate scrolling.\n   * If no options are passed, `animated` defaults to true.\n   *\n   * See `ScrollView#scrollToEnd`.\n   */\n  scrollToEnd: function scrollToEnd(options) {\n    if (this._scrollComponent) {\n      if (this._scrollComponent.scrollToEnd) {\n        this._scrollComponent.scrollToEnd(options);\n      } else {\n        console.warn('The scroll component used by the ListView does not support ' + 'scrollToEnd. Check the renderScrollComponent prop of your ListView.');\n      }\n    }\n  },\n\n  /**\n   * Displays the scroll indicators momentarily.\n   *\n   * @platform ios\n   */\n  flashScrollIndicators: function flashScrollIndicators() {\n    if (this._scrollComponent && this._scrollComponent.flashScrollIndicators) {\n      this._scrollComponent.flashScrollIndicators();\n    }\n  },\n  setNativeProps: function setNativeProps(props) {\n    if (this._scrollComponent) {\n      this._scrollComponent.setNativeProps(props);\n    }\n  },\n\n  /**\n   * React life cycle hooks.\n   */\n  getDefaultProps: function getDefaultProps() {\n    return {\n      initialListSize: DEFAULT_INITIAL_ROWS,\n      pageSize: DEFAULT_PAGE_SIZE,\n      renderScrollComponent: function renderScrollComponent(props) {\n        return _react.default.createElement(_ScrollView.default, props);\n      },\n      scrollRenderAheadDistance: DEFAULT_SCROLL_RENDER_AHEAD,\n      onEndReachedThreshold: DEFAULT_END_REACHED_THRESHOLD,\n      stickySectionHeadersEnabled: _Platform.default.OS === 'ios' || _Platform.default.OS === 'web',\n      stickyHeaderIndices: []\n    };\n  },\n  getInitialState: function getInitialState() {\n    return {\n      curRenderedRowsCount: this.props.initialListSize,\n      highlightedRow: {}\n    };\n  },\n  getInnerViewNode: function getInnerViewNode() {\n    return this._scrollComponent.getInnerViewNode();\n  },\n  UNSAFE_componentWillMount: function UNSAFE_componentWillMount() {\n    // this data should never trigger a render pass, so don't put in state\n    this.scrollProperties = {\n      visibleLength: null,\n      contentLength: null,\n      offset: 0\n    };\n    this._childFrames = [];\n    this._visibleRows = {};\n    this._prevRenderedRowsCount = 0;\n    this._sentEndForContentLength = null;\n  },\n  componentDidMount: function componentDidMount() {\n    var _this = this; // do this in animation frame until componentDidMount actually runs after\n    // the component is laid out\n\n\n    this.requestAnimationFrame(function () {\n      _this._measureAndUpdateScrollProps();\n    });\n  },\n  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {\n    var _this2 = this;\n\n    if (this.props.dataSource !== nextProps.dataSource || this.props.initialListSize !== nextProps.initialListSize) {\n      this.setState(function (state, props) {\n        _this2._prevRenderedRowsCount = 0;\n        return {\n          curRenderedRowsCount: Math.min(Math.max(state.curRenderedRowsCount, props.initialListSize), props.enableEmptySections ? props.dataSource.getRowAndSectionCount() : props.dataSource.getRowCount())\n        };\n      }, function () {\n        return _this2._renderMoreRowsIfNeeded();\n      });\n    }\n  },\n  componentDidUpdate: function componentDidUpdate() {\n    var _this3 = this;\n\n    this.requestAnimationFrame(function () {\n      _this3._measureAndUpdateScrollProps();\n    });\n  },\n  _onRowHighlighted: function _onRowHighlighted(sectionID, rowID) {\n    this.setState({\n      highlightedRow: {\n        sectionID: sectionID,\n        rowID: rowID\n      }\n    });\n  },\n  render: function render() {\n    var bodyComponents = [];\n    var dataSource = this.props.dataSource;\n    var allRowIDs = dataSource.rowIdentities;\n    var rowCount = 0;\n    var stickySectionHeaderIndices = [];\n    var renderSectionHeader = this.props.renderSectionHeader;\n    var header = this.props.renderHeader && this.props.renderHeader();\n    var footer = this.props.renderFooter && this.props.renderFooter();\n    var totalIndex = header ? 1 : 0;\n\n    for (var sectionIdx = 0; sectionIdx < allRowIDs.length; sectionIdx++) {\n      var sectionID = dataSource.sectionIdentities[sectionIdx];\n      var rowIDs = allRowIDs[sectionIdx];\n\n      if (rowIDs.length === 0) {\n        if (this.props.enableEmptySections === undefined) {\n          /* $FlowFixMe(>=0.54.0 site=react_native_oss) This comment suppresses\n           * an error found when Flow v0.54 was deployed. To see the error\n           * delete this comment and run Flow. */\n          var warning = require('fbjs/lib/warning');\n\n          warning(false, 'In next release empty section headers will be rendered.' + \" In this release you can use 'enableEmptySections' flag to render empty section headers.\");\n          continue;\n        } else {\n          var invariant = require('fbjs/lib/invariant');\n\n          invariant(this.props.enableEmptySections, \"In next release 'enableEmptySections' flag will be deprecated, empty section headers will always be rendered.\" + ' If empty section headers are not desirable their indices should be excluded from sectionIDs object.' + \" In this release 'enableEmptySections' may only have value 'true' to allow empty section headers rendering.\");\n        }\n      }\n\n      if (renderSectionHeader) {\n        var element = renderSectionHeader(dataSource.getSectionHeaderData(sectionIdx), sectionID);\n\n        if (element) {\n          bodyComponents.push(_react.default.cloneElement(element, {\n            key: 's_' + sectionID\n          }));\n\n          if (this.props.stickySectionHeadersEnabled) {\n            stickySectionHeaderIndices.push(totalIndex);\n          }\n\n          totalIndex++;\n        }\n      }\n\n      for (var rowIdx = 0; rowIdx < rowIDs.length; rowIdx++) {\n        var rowID = rowIDs[rowIdx];\n        var comboID = sectionID + '_' + rowID;\n        var shouldUpdateRow = rowCount >= this._prevRenderedRowsCount && dataSource.rowShouldUpdate(sectionIdx, rowIdx);\n\n        var row = _react.default.createElement(_StaticRenderer.default, {\n          key: 'r_' + comboID,\n          shouldUpdate: !!shouldUpdateRow,\n          render: this.props.renderRow.bind(null, dataSource.getRowData(sectionIdx, rowIdx), sectionID, rowID, this._onRowHighlighted)\n        });\n\n        bodyComponents.push(row);\n        totalIndex++;\n\n        if (this.props.renderSeparator && (rowIdx !== rowIDs.length - 1 || sectionIdx === allRowIDs.length - 1)) {\n          var adjacentRowHighlighted = this.state.highlightedRow.sectionID === sectionID && (this.state.highlightedRow.rowID === rowID || this.state.highlightedRow.rowID === rowIDs[rowIdx + 1]);\n          var separator = this.props.renderSeparator(sectionID, rowID, adjacentRowHighlighted);\n\n          if (separator) {\n            bodyComponents.push(_react.default.createElement(_View.default, {\n              key: 's_' + comboID\n            }, separator));\n            totalIndex++;\n          }\n        }\n\n        if (++rowCount === this.state.curRenderedRowsCount) {\n          break;\n        }\n      }\n\n      if (rowCount >= this.state.curRenderedRowsCount) {\n        break;\n      }\n    }\n\n    var _this$props = this.props,\n        renderScrollComponent = _this$props.renderScrollComponent,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"renderScrollComponent\"]);\n\n    if (!props.scrollEventThrottle) {\n      props.scrollEventThrottle = DEFAULT_SCROLL_CALLBACK_THROTTLE;\n    }\n\n    if (props.removeClippedSubviews === undefined) {\n      props.removeClippedSubviews = true;\n    }\n\n    _Object$assign(props, {\n      onScroll: this._onScroll,\n      stickyHeaderIndices: this.props.stickyHeaderIndices.concat(stickySectionHeaderIndices),\n      // Do not pass these events downstream to ScrollView since they will be\n      // registered in ListView's own ScrollResponder.Mixin\n      onKeyboardWillShow: undefined,\n      onKeyboardWillHide: undefined,\n      onKeyboardDidShow: undefined,\n      onKeyboardDidHide: undefined\n    });\n\n    return (0, _cloneReferencedElement.default)(renderScrollComponent(props), {\n      ref: this._setScrollComponentRef,\n      onContentSizeChange: this._onContentSizeChange,\n      onLayout: this._onLayout,\n      DEPRECATED_sendUpdatedChildFrames: typeof props.onChangeVisibleRows !== undefined\n    }, header, bodyComponents, footer);\n  },\n\n  /**\n   * Private methods\n   */\n  _measureAndUpdateScrollProps: function _measureAndUpdateScrollProps() {\n    var scrollComponent = this.getScrollResponder();\n\n    if (!scrollComponent || !scrollComponent.getInnerViewNode) {\n      return;\n    } // RCTScrollViewManager.calculateChildFrames is not available on\n    // every platform\n\n\n    RCTScrollViewManager && RCTScrollViewManager.calculateChildFrames && RCTScrollViewManager.calculateChildFrames((0, _findNodeHandle.default)(scrollComponent), this._updateVisibleRows);\n  },\n  _setScrollComponentRef: function _setScrollComponentRef(scrollComponent) {\n    this._scrollComponent = scrollComponent;\n  },\n  _onContentSizeChange: function _onContentSizeChange(width, height) {\n    var contentLength = !this.props.horizontal ? height : width;\n\n    if (contentLength !== this.scrollProperties.contentLength) {\n      this.scrollProperties.contentLength = contentLength;\n\n      this._updateVisibleRows();\n\n      this._renderMoreRowsIfNeeded();\n    }\n\n    this.props.onContentSizeChange && this.props.onContentSizeChange(width, height);\n  },\n  _onLayout: function _onLayout(event) {\n    var _event$nativeEvent$la = event.nativeEvent.layout,\n        width = _event$nativeEvent$la.width,\n        height = _event$nativeEvent$la.height;\n    var visibleLength = !this.props.horizontal ? height : width;\n\n    if (visibleLength !== this.scrollProperties.visibleLength) {\n      this.scrollProperties.visibleLength = visibleLength;\n\n      this._updateVisibleRows();\n\n      this._renderMoreRowsIfNeeded();\n    }\n\n    this.props.onLayout && this.props.onLayout(event);\n  },\n  _maybeCallOnEndReached: function _maybeCallOnEndReached(event) {\n    if (this.props.onEndReached && this.scrollProperties.contentLength !== this._sentEndForContentLength && this._getDistanceFromEnd(this.scrollProperties) < this.props.onEndReachedThreshold && this.state.curRenderedRowsCount === (this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount())) {\n      this._sentEndForContentLength = this.scrollProperties.contentLength;\n      this.props.onEndReached(event);\n      return true;\n    }\n\n    return false;\n  },\n  _renderMoreRowsIfNeeded: function _renderMoreRowsIfNeeded() {\n    if (this.scrollProperties.contentLength === null || this.scrollProperties.visibleLength === null || this.state.curRenderedRowsCount === (this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount())) {\n      this._maybeCallOnEndReached();\n\n      return;\n    }\n\n    var distanceFromEnd = this._getDistanceFromEnd(this.scrollProperties);\n\n    if (distanceFromEnd < this.props.scrollRenderAheadDistance) {\n      this._pageInNewRows();\n    }\n  },\n  _pageInNewRows: function _pageInNewRows() {\n    var _this4 = this;\n\n    this.setState(function (state, props) {\n      var rowsToRender = Math.min(state.curRenderedRowsCount + props.pageSize, props.enableEmptySections ? props.dataSource.getRowAndSectionCount() : props.dataSource.getRowCount());\n      _this4._prevRenderedRowsCount = state.curRenderedRowsCount;\n      return {\n        curRenderedRowsCount: rowsToRender\n      };\n    }, function () {\n      _this4._measureAndUpdateScrollProps();\n\n      _this4._prevRenderedRowsCount = _this4.state.curRenderedRowsCount;\n    });\n  },\n  _getDistanceFromEnd: function _getDistanceFromEnd(scrollProperties) {\n    return scrollProperties.contentLength - scrollProperties.visibleLength - scrollProperties.offset;\n  },\n  _updateVisibleRows: function _updateVisibleRows(updatedFrames) {\n    var _this5 = this;\n\n    if (!this.props.onChangeVisibleRows) {\n      return; // No need to compute visible rows if there is no callback\n    }\n\n    if (updatedFrames) {\n      updatedFrames.forEach(function (newFrame) {\n        _this5._childFrames[newFrame.index] = merge(newFrame);\n      });\n    }\n\n    var isVertical = !this.props.horizontal;\n    var dataSource = this.props.dataSource;\n    var visibleMin = this.scrollProperties.offset;\n    var visibleMax = visibleMin + this.scrollProperties.visibleLength;\n    var allRowIDs = dataSource.rowIdentities;\n    var header = this.props.renderHeader && this.props.renderHeader();\n    var totalIndex = header ? 1 : 0;\n    var visibilityChanged = false;\n    var changedRows = {};\n\n    for (var sectionIdx = 0; sectionIdx < allRowIDs.length; sectionIdx++) {\n      var rowIDs = allRowIDs[sectionIdx];\n\n      if (rowIDs.length === 0) {\n        continue;\n      }\n\n      var sectionID = dataSource.sectionIdentities[sectionIdx];\n\n      if (this.props.renderSectionHeader) {\n        totalIndex++;\n      }\n\n      var visibleSection = this._visibleRows[sectionID];\n\n      if (!visibleSection) {\n        visibleSection = {};\n      }\n\n      for (var rowIdx = 0; rowIdx < rowIDs.length; rowIdx++) {\n        var rowID = rowIDs[rowIdx];\n        var frame = this._childFrames[totalIndex];\n        totalIndex++;\n\n        if (this.props.renderSeparator && (rowIdx !== rowIDs.length - 1 || sectionIdx === allRowIDs.length - 1)) {\n          totalIndex++;\n        }\n\n        if (!frame) {\n          break;\n        }\n\n        var rowVisible = visibleSection[rowID];\n        var min = isVertical ? frame.y : frame.x;\n        var max = min + (isVertical ? frame.height : frame.width);\n\n        if (!min && !max || min === max) {\n          break;\n        }\n\n        if (min > visibleMax || max < visibleMin) {\n          if (rowVisible) {\n            visibilityChanged = true;\n            delete visibleSection[rowID];\n\n            if (!changedRows[sectionID]) {\n              changedRows[sectionID] = {};\n            }\n\n            changedRows[sectionID][rowID] = false;\n          }\n        } else if (!rowVisible) {\n          visibilityChanged = true;\n          visibleSection[rowID] = true;\n\n          if (!changedRows[sectionID]) {\n            changedRows[sectionID] = {};\n          }\n\n          changedRows[sectionID][rowID] = true;\n        }\n      }\n\n      if (!(0, _isEmpty.default)(visibleSection)) {\n        this._visibleRows[sectionID] = visibleSection;\n      } else if (this._visibleRows[sectionID]) {\n        delete this._visibleRows[sectionID];\n      }\n    }\n\n    visibilityChanged && this.props.onChangeVisibleRows(this._visibleRows, changedRows);\n  },\n  _onScroll: function _onScroll(e) {\n    var isVertical = !this.props.horizontal;\n    this.scrollProperties.visibleLength = e.nativeEvent.layoutMeasurement[isVertical ? 'height' : 'width'];\n    this.scrollProperties.contentLength = e.nativeEvent.contentSize[isVertical ? 'height' : 'width'];\n    this.scrollProperties.offset = e.nativeEvent.contentOffset[isVertical ? 'y' : 'x'];\n\n    this._updateVisibleRows(e.nativeEvent.updatedChildFrames);\n\n    if (!this._maybeCallOnEndReached(e)) {\n      this._renderMoreRowsIfNeeded();\n    }\n\n    if (this.props.onEndReached && this._getDistanceFromEnd(this.scrollProperties) > this.props.onEndReachedThreshold) {\n      // Scrolled out of the end zone, so it should be able to trigger again.\n      this._sentEndForContentLength = null;\n    }\n\n    this.props.onScroll && this.props.onScroll(e);\n  }\n});\nvar _default = ListView;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["/Users/utkarsh/Desktop/headout/ReactNativeOne/node_modules/react-native-web/dist/cjs/vendor/react-native/ListView/index.js"],"names":["exports","__esModule","default","_ListViewDataSource","_interopRequireDefault","require","_Platform","_react","_propTypes","_findNodeHandle","_NativeModules","_ScrollView","_ScrollResponder","_StaticRenderer","_reactTimerMixin","_View","_cloneReferencedElement","_createReactClass","_isEmpty","obj","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","key","i","length","indexOf","_objectSpread","arguments","ownKeys","concat","filter","sym","enumerable","forEach","_defineProperty","value","configurable","writable","merge","_len","args","Array","_key","apply","Object","RCTScrollViewManager","ScrollViewManager","DEFAULT_PAGE_SIZE","DEFAULT_INITIAL_ROWS","DEFAULT_SCROLL_RENDER_AHEAD","DEFAULT_END_REACHED_THRESHOLD","DEFAULT_SCROLL_CALLBACK_THROTTLE","ListView","displayName","_childFrames","_sentEndForContentLength","_scrollComponent","_prevRenderedRowsCount","_visibleRows","scrollProperties","mixins","Mixin","statics","DataSource","propTypes","dataSource","instanceOf","isRequired","renderSeparator","func","renderRow","initialListSize","number","onEndReached","onEndReachedThreshold","pageSize","renderFooter","renderHeader","renderSectionHeader","renderScrollComponent","scrollRenderAheadDistance","onChangeVisibleRows","removeClippedSubviews","bool","stickySectionHeadersEnabled","stickyHeaderIndices","arrayOf","enableEmptySections","getMetrics","contentLength","totalRows","props","getRowAndSectionCount","getRowCount","renderedRows","state","curRenderedRowsCount","visibleRows","getScrollResponder","getScrollableNode","scrollTo","_this$_scrollComponen","scrollToEnd","options","console","warn","flashScrollIndicators","setNativeProps","getDefaultProps","createElement","OS","getInitialState","highlightedRow","getInnerViewNode","UNSAFE_componentWillMount","visibleLength","offset","componentDidMount","_this","requestAnimationFrame","_measureAndUpdateScrollProps","UNSAFE_componentWillReceiveProps","nextProps","_this2","setState","Math","min","max","_renderMoreRowsIfNeeded","componentDidUpdate","_this3","_onRowHighlighted","sectionID","rowID","render","bodyComponents","allRowIDs","rowIdentities","rowCount","stickySectionHeaderIndices","header","footer","totalIndex","sectionIdx","sectionIdentities","rowIDs","undefined","warning","invariant","element","getSectionHeaderData","push","cloneElement","rowIdx","comboID","shouldUpdateRow","rowShouldUpdate","row","shouldUpdate","bind","getRowData","adjacentRowHighlighted","separator","_this$props","scrollEventThrottle","onScroll","_onScroll","onKeyboardWillShow","onKeyboardWillHide","onKeyboardDidShow","onKeyboardDidHide","ref","_setScrollComponentRef","onContentSizeChange","_onContentSizeChange","onLayout","_onLayout","DEPRECATED_sendUpdatedChildFrames","scrollComponent","calculateChildFrames","_updateVisibleRows","width","height","horizontal","event","_event$nativeEvent$la","nativeEvent","layout","_maybeCallOnEndReached","_getDistanceFromEnd","distanceFromEnd","_pageInNewRows","_this4","rowsToRender","updatedFrames","_this5","newFrame","index","isVertical","visibleMin","visibleMax","visibilityChanged","changedRows","visibleSection","frame","rowVisible","y","x","e","layoutMeasurement","contentSize","contentOffset","updatedChildFrames","_default","module"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @providesModule ListView\n * \n * @format\n */\n'use strict';\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _ListViewDataSource = _interopRequireDefault(require(\"./ListViewDataSource\"));\n\nvar _Platform = _interopRequireDefault(require(\"../../../exports/Platform\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _findNodeHandle = _interopRequireDefault(require(\"../../../exports/findNodeHandle\"));\n\nvar _NativeModules = _interopRequireDefault(require(\"../../../exports/NativeModules\"));\n\nvar _ScrollView = _interopRequireDefault(require(\"../../../exports/ScrollView\"));\n\nvar _ScrollResponder = _interopRequireDefault(require(\"../../../modules/ScrollResponder\"));\n\nvar _StaticRenderer = _interopRequireDefault(require(\"../StaticRenderer\"));\n\nvar _reactTimerMixin = _interopRequireDefault(require(\"react-timer-mixin\"));\n\nvar _View = _interopRequireDefault(require(\"../../../exports/View\"));\n\nvar _cloneReferencedElement = _interopRequireDefault(require(\"./cloneReferencedElement\"));\n\nvar _createReactClass = _interopRequireDefault(require(\"create-react-class\"));\n\nvar _isEmpty = _interopRequireDefault(require(\"../isEmpty\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar merge = function merge() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return Object.assign.apply(Object, [{}].concat(args));\n};\n\nvar RCTScrollViewManager = _NativeModules.default.ScrollViewManager;\nvar DEFAULT_PAGE_SIZE = 1;\nvar DEFAULT_INITIAL_ROWS = 10;\nvar DEFAULT_SCROLL_RENDER_AHEAD = 1000;\nvar DEFAULT_END_REACHED_THRESHOLD = 1000;\nvar DEFAULT_SCROLL_CALLBACK_THROTTLE = 50;\n/**\n * DEPRECATED - use one of the new list components, such as [`FlatList`](docs/flatlist.html)\n * or [`SectionList`](docs/sectionlist.html) for bounded memory use, fewer bugs,\n * better performance, an easier to use API, and more features. Check out this\n * [blog post](https://facebook.github.io/react-native/blog/2017/03/13/better-list-views.html)\n * for more details.\n *\n * ListView - A core component designed for efficient display of vertically\n * scrolling lists of changing data. The minimal API is to create a\n * [`ListView.DataSource`](docs/listviewdatasource.html), populate it with a simple\n * array of data blobs, and instantiate a `ListView` component with that data\n * source and a `renderRow` callback which takes a blob from the data array and\n * returns a renderable component.\n *\n * Minimal example:\n *\n * ```\n * class MyComponent extends Component {\n *   constructor() {\n *     super();\n *     const ds = new ListView.DataSource({rowHasChanged: (r1, r2) => r1 !== r2});\n *     this.state = {\n *       dataSource: ds.cloneWithRows(['row 1', 'row 2']),\n *     };\n *   }\n *\n *   render() {\n *     return (\n *       <ListView\n *         dataSource={this.state.dataSource}\n *         renderRow={(rowData) => <Text>{rowData}</Text>}\n *       />\n *     );\n *   }\n * }\n * ```\n *\n * ListView also supports more advanced features, including sections with sticky\n * section headers, header and footer support, callbacks on reaching the end of\n * the available data (`onEndReached`) and on the set of rows that are visible\n * in the device viewport change (`onChangeVisibleRows`), and several\n * performance optimizations.\n *\n * There are a few performance operations designed to make ListView scroll\n * smoothly while dynamically loading potentially very large (or conceptually\n * infinite) data sets:\n *\n *  * Only re-render changed rows - the rowHasChanged function provided to the\n *    data source tells the ListView if it needs to re-render a row because the\n *    source data has changed - see ListViewDataSource for more details.\n *\n *  * Rate-limited row rendering - By default, only one row is rendered per\n *    event-loop (customizable with the `pageSize` prop). This breaks up the\n *    work into smaller chunks to reduce the chance of dropping frames while\n *    rendering rows.\n */\n\nvar ListView = (0, _createReactClass.default)({\n  displayName: 'ListView',\n  _childFrames: [],\n  _sentEndForContentLength: null,\n  _scrollComponent: null,\n  _prevRenderedRowsCount: 0,\n  _visibleRows: {},\n  scrollProperties: {},\n  mixins: [_ScrollResponder.default.Mixin, _reactTimerMixin.default],\n  statics: {\n    DataSource: _ListViewDataSource.default\n  },\n\n  /**\n   * You must provide a renderRow function. If you omit any of the other render\n   * functions, ListView will simply skip rendering them.\n   *\n   * - renderRow(rowData, sectionID, rowID, highlightRow);\n   * - renderSectionHeader(sectionData, sectionID);\n   */\n  propTypes: _objectSpread({}, _ScrollView.default.propTypes, {\n    /**\n     * An instance of [ListView.DataSource](docs/listviewdatasource.html) to use\n     */\n    dataSource: _propTypes.default.instanceOf(_ListViewDataSource.default).isRequired,\n\n    /**\n     * (sectionID, rowID, adjacentRowHighlighted) => renderable\n     *\n     * If provided, a renderable component to be rendered as the separator\n     * below each row but not the last row if there is a section header below.\n     * Take a sectionID and rowID of the row above and whether its adjacent row\n     * is highlighted.\n     */\n    renderSeparator: _propTypes.default.func,\n\n    /**\n     * (rowData, sectionID, rowID, highlightRow) => renderable\n     *\n     * Takes a data entry from the data source and its ids and should return\n     * a renderable component to be rendered as the row. By default the data\n     * is exactly what was put into the data source, but it's also possible to\n     * provide custom extractors. ListView can be notified when a row is\n     * being highlighted by calling `highlightRow(sectionID, rowID)`. This\n     * sets a boolean value of adjacentRowHighlighted in renderSeparator, allowing you\n     * to control the separators above and below the highlighted row. The highlighted\n     * state of a row can be reset by calling highlightRow(null).\n     */\n    renderRow: _propTypes.default.func.isRequired,\n\n    /**\n     * How many rows to render on initial component mount. Use this to make\n     * it so that the first screen worth of data appears at one time instead of\n     * over the course of multiple frames.\n     */\n    initialListSize: _propTypes.default.number.isRequired,\n\n    /**\n     * Called when all rows have been rendered and the list has been scrolled\n     * to within onEndReachedThreshold of the bottom. The native scroll\n     * event is provided.\n     */\n    onEndReached: _propTypes.default.func,\n\n    /**\n     * Threshold in pixels (virtual, not physical) for calling onEndReached.\n     */\n    onEndReachedThreshold: _propTypes.default.number.isRequired,\n\n    /**\n     * Number of rows to render per event loop. Note: if your 'rows' are actually\n     * cells, i.e. they don't span the full width of your view (as in the\n     * ListViewGridLayoutExample), you should set the pageSize to be a multiple\n     * of the number of cells per row, otherwise you're likely to see gaps at\n     * the edge of the ListView as new pages are loaded.\n     */\n    pageSize: _propTypes.default.number.isRequired,\n\n    /**\n     * () => renderable\n     *\n     * The header and footer are always rendered (if these props are provided)\n     * on every render pass. If they are expensive to re-render, wrap them\n     * in StaticContainer or other mechanism as appropriate. Footer is always\n     * at the bottom of the list, and header at the top, on every render pass.\n     * In a horizontal ListView, the header is rendered on the left and the\n     * footer on the right.\n     */\n    renderFooter: _propTypes.default.func,\n    renderHeader: _propTypes.default.func,\n\n    /**\n     * (sectionData, sectionID) => renderable\n     *\n     * If provided, a header is rendered for this section.\n     */\n    renderSectionHeader: _propTypes.default.func,\n\n    /**\n     * (props) => renderable\n     *\n     * A function that returns the scrollable component in which the list rows\n     * are rendered. Defaults to returning a ScrollView with the given props.\n     */\n    renderScrollComponent: _propTypes.default.func.isRequired,\n\n    /**\n     * How early to start rendering rows before they come on screen, in\n     * pixels.\n     */\n    scrollRenderAheadDistance: _propTypes.default.number.isRequired,\n\n    /**\n     * (visibleRows, changedRows) => void\n     *\n     * Called when the set of visible rows changes. `visibleRows` maps\n     * { sectionID: { rowID: true }} for all the visible rows, and\n     * `changedRows` maps { sectionID: { rowID: true | false }} for the rows\n     * that have changed their visibility, with true indicating visible, and\n     * false indicating the view has moved out of view.\n     */\n    onChangeVisibleRows: _propTypes.default.func,\n\n    /**\n     * A performance optimization for improving scroll perf of\n     * large lists, used in conjunction with overflow: 'hidden' on the row\n     * containers. This is enabled by default.\n     */\n    removeClippedSubviews: _propTypes.default.bool,\n\n    /**\n     * Makes the sections headers sticky. The sticky behavior means that it\n     * will scroll with the content at the top of the section until it reaches\n     * the top of the screen, at which point it will stick to the top until it\n     * is pushed off the screen by the next section header. This property is\n     * not supported in conjunction with `horizontal={true}`. Only enabled by\n     * default on iOS because of typical platform standards.\n     */\n    stickySectionHeadersEnabled: _propTypes.default.bool,\n\n    /**\n     * An array of child indices determining which children get docked to the\n     * top of the screen when scrolling. For example, passing\n     * `stickyHeaderIndices={[0]}` will cause the first child to be fixed to the\n     * top of the scroll view. This property is not supported in conjunction\n     * with `horizontal={true}`.\n     */\n    stickyHeaderIndices: _propTypes.default.arrayOf(_propTypes.default.number).isRequired,\n\n    /**\n     * Flag indicating whether empty section headers should be rendered. In the future release\n     * empty section headers will be rendered by default, and the flag will be deprecated.\n     * If empty sections are not desired to be rendered their indices should be excluded from sectionID object.\n     */\n    enableEmptySections: _propTypes.default.bool\n  }),\n\n  /**\n   * Exports some data, e.g. for perf investigations or analytics.\n   */\n  getMetrics: function getMetrics() {\n    return {\n      contentLength: this.scrollProperties.contentLength,\n      totalRows: this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount(),\n      renderedRows: this.state.curRenderedRowsCount,\n      visibleRows: Object.keys(this._visibleRows).length\n    };\n  },\n\n  /**\n   * Provides a handle to the underlying scroll responder.\n   * Note that `this._scrollComponent` might not be a `ScrollView`, so we\n   * need to check that it responds to `getScrollResponder` before calling it.\n   */\n  getScrollResponder: function getScrollResponder() {\n    if (this._scrollComponent && this._scrollComponent.getScrollResponder) {\n      return this._scrollComponent.getScrollResponder();\n    }\n  },\n  getScrollableNode: function getScrollableNode() {\n    if (this._scrollComponent && this._scrollComponent.getScrollableNode) {\n      return this._scrollComponent.getScrollableNode();\n    } else {\n      return (0, _findNodeHandle.default)(this._scrollComponent);\n    }\n  },\n\n  /**\n   * Scrolls to a given x, y offset, either immediately or with a smooth animation.\n   *\n   * See `ScrollView#scrollTo`.\n   */\n  scrollTo: function scrollTo() {\n    if (this._scrollComponent && this._scrollComponent.scrollTo) {\n      var _this$_scrollComponen;\n\n      (_this$_scrollComponen = this._scrollComponent).scrollTo.apply(_this$_scrollComponen, arguments);\n    }\n  },\n\n  /**\n   * If this is a vertical ListView scrolls to the bottom.\n   * If this is a horizontal ListView scrolls to the right.\n   *\n   * Use `scrollToEnd({animated: true})` for smooth animated scrolling,\n   * `scrollToEnd({animated: false})` for immediate scrolling.\n   * If no options are passed, `animated` defaults to true.\n   *\n   * See `ScrollView#scrollToEnd`.\n   */\n  scrollToEnd: function scrollToEnd(options) {\n    if (this._scrollComponent) {\n      if (this._scrollComponent.scrollToEnd) {\n        this._scrollComponent.scrollToEnd(options);\n      } else {\n        console.warn('The scroll component used by the ListView does not support ' + 'scrollToEnd. Check the renderScrollComponent prop of your ListView.');\n      }\n    }\n  },\n\n  /**\n   * Displays the scroll indicators momentarily.\n   *\n   * @platform ios\n   */\n  flashScrollIndicators: function flashScrollIndicators() {\n    if (this._scrollComponent && this._scrollComponent.flashScrollIndicators) {\n      this._scrollComponent.flashScrollIndicators();\n    }\n  },\n  setNativeProps: function setNativeProps(props) {\n    if (this._scrollComponent) {\n      this._scrollComponent.setNativeProps(props);\n    }\n  },\n\n  /**\n   * React life cycle hooks.\n   */\n  getDefaultProps: function getDefaultProps() {\n    return {\n      initialListSize: DEFAULT_INITIAL_ROWS,\n      pageSize: DEFAULT_PAGE_SIZE,\n      renderScrollComponent: function renderScrollComponent(props) {\n        return _react.default.createElement(_ScrollView.default, props);\n      },\n      scrollRenderAheadDistance: DEFAULT_SCROLL_RENDER_AHEAD,\n      onEndReachedThreshold: DEFAULT_END_REACHED_THRESHOLD,\n      stickySectionHeadersEnabled: _Platform.default.OS === 'ios' || _Platform.default.OS === 'web',\n      stickyHeaderIndices: []\n    };\n  },\n  getInitialState: function getInitialState() {\n    return {\n      curRenderedRowsCount: this.props.initialListSize,\n      highlightedRow: {}\n    };\n  },\n  getInnerViewNode: function getInnerViewNode() {\n    return this._scrollComponent.getInnerViewNode();\n  },\n  UNSAFE_componentWillMount: function UNSAFE_componentWillMount() {\n    // this data should never trigger a render pass, so don't put in state\n    this.scrollProperties = {\n      visibleLength: null,\n      contentLength: null,\n      offset: 0\n    };\n    this._childFrames = [];\n    this._visibleRows = {};\n    this._prevRenderedRowsCount = 0;\n    this._sentEndForContentLength = null;\n  },\n  componentDidMount: function componentDidMount() {\n    var _this = this;\n\n    // do this in animation frame until componentDidMount actually runs after\n    // the component is laid out\n    this.requestAnimationFrame(function () {\n      _this._measureAndUpdateScrollProps();\n    });\n  },\n  UNSAFE_componentWillReceiveProps: function UNSAFE_componentWillReceiveProps(nextProps) {\n    var _this2 = this;\n\n    if (this.props.dataSource !== nextProps.dataSource || this.props.initialListSize !== nextProps.initialListSize) {\n      this.setState(function (state, props) {\n        _this2._prevRenderedRowsCount = 0;\n        return {\n          curRenderedRowsCount: Math.min(Math.max(state.curRenderedRowsCount, props.initialListSize), props.enableEmptySections ? props.dataSource.getRowAndSectionCount() : props.dataSource.getRowCount())\n        };\n      }, function () {\n        return _this2._renderMoreRowsIfNeeded();\n      });\n    }\n  },\n  componentDidUpdate: function componentDidUpdate() {\n    var _this3 = this;\n\n    this.requestAnimationFrame(function () {\n      _this3._measureAndUpdateScrollProps();\n    });\n  },\n  _onRowHighlighted: function _onRowHighlighted(sectionID, rowID) {\n    this.setState({\n      highlightedRow: {\n        sectionID: sectionID,\n        rowID: rowID\n      }\n    });\n  },\n  render: function render() {\n    var bodyComponents = [];\n    var dataSource = this.props.dataSource;\n    var allRowIDs = dataSource.rowIdentities;\n    var rowCount = 0;\n    var stickySectionHeaderIndices = [];\n    var renderSectionHeader = this.props.renderSectionHeader;\n    var header = this.props.renderHeader && this.props.renderHeader();\n    var footer = this.props.renderFooter && this.props.renderFooter();\n    var totalIndex = header ? 1 : 0;\n\n    for (var sectionIdx = 0; sectionIdx < allRowIDs.length; sectionIdx++) {\n      var sectionID = dataSource.sectionIdentities[sectionIdx];\n      var rowIDs = allRowIDs[sectionIdx];\n\n      if (rowIDs.length === 0) {\n        if (this.props.enableEmptySections === undefined) {\n          /* $FlowFixMe(>=0.54.0 site=react_native_oss) This comment suppresses\n           * an error found when Flow v0.54 was deployed. To see the error\n           * delete this comment and run Flow. */\n          var warning = require('fbjs/lib/warning');\n\n          warning(false, 'In next release empty section headers will be rendered.' + \" In this release you can use 'enableEmptySections' flag to render empty section headers.\");\n          continue;\n        } else {\n          var invariant = require('fbjs/lib/invariant');\n\n          invariant(this.props.enableEmptySections, \"In next release 'enableEmptySections' flag will be deprecated, empty section headers will always be rendered.\" + ' If empty section headers are not desirable their indices should be excluded from sectionIDs object.' + \" In this release 'enableEmptySections' may only have value 'true' to allow empty section headers rendering.\");\n        }\n      }\n\n      if (renderSectionHeader) {\n        var element = renderSectionHeader(dataSource.getSectionHeaderData(sectionIdx), sectionID);\n\n        if (element) {\n          bodyComponents.push(_react.default.cloneElement(element, {\n            key: 's_' + sectionID\n          }));\n\n          if (this.props.stickySectionHeadersEnabled) {\n            stickySectionHeaderIndices.push(totalIndex);\n          }\n\n          totalIndex++;\n        }\n      }\n\n      for (var rowIdx = 0; rowIdx < rowIDs.length; rowIdx++) {\n        var rowID = rowIDs[rowIdx];\n        var comboID = sectionID + '_' + rowID;\n        var shouldUpdateRow = rowCount >= this._prevRenderedRowsCount && dataSource.rowShouldUpdate(sectionIdx, rowIdx);\n\n        var row = _react.default.createElement(_StaticRenderer.default, {\n          key: 'r_' + comboID,\n          shouldUpdate: !!shouldUpdateRow,\n          render: this.props.renderRow.bind(null, dataSource.getRowData(sectionIdx, rowIdx), sectionID, rowID, this._onRowHighlighted)\n        });\n\n        bodyComponents.push(row);\n        totalIndex++;\n\n        if (this.props.renderSeparator && (rowIdx !== rowIDs.length - 1 || sectionIdx === allRowIDs.length - 1)) {\n          var adjacentRowHighlighted = this.state.highlightedRow.sectionID === sectionID && (this.state.highlightedRow.rowID === rowID || this.state.highlightedRow.rowID === rowIDs[rowIdx + 1]);\n          var separator = this.props.renderSeparator(sectionID, rowID, adjacentRowHighlighted);\n\n          if (separator) {\n            bodyComponents.push(_react.default.createElement(_View.default, {\n              key: 's_' + comboID\n            }, separator));\n            totalIndex++;\n          }\n        }\n\n        if (++rowCount === this.state.curRenderedRowsCount) {\n          break;\n        }\n      }\n\n      if (rowCount >= this.state.curRenderedRowsCount) {\n        break;\n      }\n    }\n\n    var _this$props = this.props,\n        renderScrollComponent = _this$props.renderScrollComponent,\n        props = _objectWithoutPropertiesLoose(_this$props, [\"renderScrollComponent\"]);\n\n    if (!props.scrollEventThrottle) {\n      props.scrollEventThrottle = DEFAULT_SCROLL_CALLBACK_THROTTLE;\n    }\n\n    if (props.removeClippedSubviews === undefined) {\n      props.removeClippedSubviews = true;\n    }\n\n    Object.assign(props, {\n      onScroll: this._onScroll,\n      stickyHeaderIndices: this.props.stickyHeaderIndices.concat(stickySectionHeaderIndices),\n      // Do not pass these events downstream to ScrollView since they will be\n      // registered in ListView's own ScrollResponder.Mixin\n      onKeyboardWillShow: undefined,\n      onKeyboardWillHide: undefined,\n      onKeyboardDidShow: undefined,\n      onKeyboardDidHide: undefined\n    });\n    return (0, _cloneReferencedElement.default)(renderScrollComponent(props), {\n      ref: this._setScrollComponentRef,\n      onContentSizeChange: this._onContentSizeChange,\n      onLayout: this._onLayout,\n      DEPRECATED_sendUpdatedChildFrames: typeof props.onChangeVisibleRows !== undefined\n    }, header, bodyComponents, footer);\n  },\n\n  /**\n   * Private methods\n   */\n  _measureAndUpdateScrollProps: function _measureAndUpdateScrollProps() {\n    var scrollComponent = this.getScrollResponder();\n\n    if (!scrollComponent || !scrollComponent.getInnerViewNode) {\n      return;\n    } // RCTScrollViewManager.calculateChildFrames is not available on\n    // every platform\n\n\n    RCTScrollViewManager && RCTScrollViewManager.calculateChildFrames && RCTScrollViewManager.calculateChildFrames((0, _findNodeHandle.default)(scrollComponent), this._updateVisibleRows);\n  },\n  _setScrollComponentRef: function _setScrollComponentRef(scrollComponent) {\n    this._scrollComponent = scrollComponent;\n  },\n  _onContentSizeChange: function _onContentSizeChange(width, height) {\n    var contentLength = !this.props.horizontal ? height : width;\n\n    if (contentLength !== this.scrollProperties.contentLength) {\n      this.scrollProperties.contentLength = contentLength;\n\n      this._updateVisibleRows();\n\n      this._renderMoreRowsIfNeeded();\n    }\n\n    this.props.onContentSizeChange && this.props.onContentSizeChange(width, height);\n  },\n  _onLayout: function _onLayout(event) {\n    var _event$nativeEvent$la = event.nativeEvent.layout,\n        width = _event$nativeEvent$la.width,\n        height = _event$nativeEvent$la.height;\n    var visibleLength = !this.props.horizontal ? height : width;\n\n    if (visibleLength !== this.scrollProperties.visibleLength) {\n      this.scrollProperties.visibleLength = visibleLength;\n\n      this._updateVisibleRows();\n\n      this._renderMoreRowsIfNeeded();\n    }\n\n    this.props.onLayout && this.props.onLayout(event);\n  },\n  _maybeCallOnEndReached: function _maybeCallOnEndReached(event) {\n    if (this.props.onEndReached && this.scrollProperties.contentLength !== this._sentEndForContentLength && this._getDistanceFromEnd(this.scrollProperties) < this.props.onEndReachedThreshold && this.state.curRenderedRowsCount === (this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount())) {\n      this._sentEndForContentLength = this.scrollProperties.contentLength;\n      this.props.onEndReached(event);\n      return true;\n    }\n\n    return false;\n  },\n  _renderMoreRowsIfNeeded: function _renderMoreRowsIfNeeded() {\n    if (this.scrollProperties.contentLength === null || this.scrollProperties.visibleLength === null || this.state.curRenderedRowsCount === (this.props.enableEmptySections ? this.props.dataSource.getRowAndSectionCount() : this.props.dataSource.getRowCount())) {\n      this._maybeCallOnEndReached();\n\n      return;\n    }\n\n    var distanceFromEnd = this._getDistanceFromEnd(this.scrollProperties);\n\n    if (distanceFromEnd < this.props.scrollRenderAheadDistance) {\n      this._pageInNewRows();\n    }\n  },\n  _pageInNewRows: function _pageInNewRows() {\n    var _this4 = this;\n\n    this.setState(function (state, props) {\n      var rowsToRender = Math.min(state.curRenderedRowsCount + props.pageSize, props.enableEmptySections ? props.dataSource.getRowAndSectionCount() : props.dataSource.getRowCount());\n      _this4._prevRenderedRowsCount = state.curRenderedRowsCount;\n      return {\n        curRenderedRowsCount: rowsToRender\n      };\n    }, function () {\n      _this4._measureAndUpdateScrollProps();\n\n      _this4._prevRenderedRowsCount = _this4.state.curRenderedRowsCount;\n    });\n  },\n  _getDistanceFromEnd: function _getDistanceFromEnd(scrollProperties) {\n    return scrollProperties.contentLength - scrollProperties.visibleLength - scrollProperties.offset;\n  },\n  _updateVisibleRows: function _updateVisibleRows(updatedFrames) {\n    var _this5 = this;\n\n    if (!this.props.onChangeVisibleRows) {\n      return; // No need to compute visible rows if there is no callback\n    }\n\n    if (updatedFrames) {\n      updatedFrames.forEach(function (newFrame) {\n        _this5._childFrames[newFrame.index] = merge(newFrame);\n      });\n    }\n\n    var isVertical = !this.props.horizontal;\n    var dataSource = this.props.dataSource;\n    var visibleMin = this.scrollProperties.offset;\n    var visibleMax = visibleMin + this.scrollProperties.visibleLength;\n    var allRowIDs = dataSource.rowIdentities;\n    var header = this.props.renderHeader && this.props.renderHeader();\n    var totalIndex = header ? 1 : 0;\n    var visibilityChanged = false;\n    var changedRows = {};\n\n    for (var sectionIdx = 0; sectionIdx < allRowIDs.length; sectionIdx++) {\n      var rowIDs = allRowIDs[sectionIdx];\n\n      if (rowIDs.length === 0) {\n        continue;\n      }\n\n      var sectionID = dataSource.sectionIdentities[sectionIdx];\n\n      if (this.props.renderSectionHeader) {\n        totalIndex++;\n      }\n\n      var visibleSection = this._visibleRows[sectionID];\n\n      if (!visibleSection) {\n        visibleSection = {};\n      }\n\n      for (var rowIdx = 0; rowIdx < rowIDs.length; rowIdx++) {\n        var rowID = rowIDs[rowIdx];\n        var frame = this._childFrames[totalIndex];\n        totalIndex++;\n\n        if (this.props.renderSeparator && (rowIdx !== rowIDs.length - 1 || sectionIdx === allRowIDs.length - 1)) {\n          totalIndex++;\n        }\n\n        if (!frame) {\n          break;\n        }\n\n        var rowVisible = visibleSection[rowID];\n        var min = isVertical ? frame.y : frame.x;\n        var max = min + (isVertical ? frame.height : frame.width);\n\n        if (!min && !max || min === max) {\n          break;\n        }\n\n        if (min > visibleMax || max < visibleMin) {\n          if (rowVisible) {\n            visibilityChanged = true;\n            delete visibleSection[rowID];\n\n            if (!changedRows[sectionID]) {\n              changedRows[sectionID] = {};\n            }\n\n            changedRows[sectionID][rowID] = false;\n          }\n        } else if (!rowVisible) {\n          visibilityChanged = true;\n          visibleSection[rowID] = true;\n\n          if (!changedRows[sectionID]) {\n            changedRows[sectionID] = {};\n          }\n\n          changedRows[sectionID][rowID] = true;\n        }\n      }\n\n      if (!(0, _isEmpty.default)(visibleSection)) {\n        this._visibleRows[sectionID] = visibleSection;\n      } else if (this._visibleRows[sectionID]) {\n        delete this._visibleRows[sectionID];\n      }\n    }\n\n    visibilityChanged && this.props.onChangeVisibleRows(this._visibleRows, changedRows);\n  },\n  _onScroll: function _onScroll(e) {\n    var isVertical = !this.props.horizontal;\n    this.scrollProperties.visibleLength = e.nativeEvent.layoutMeasurement[isVertical ? 'height' : 'width'];\n    this.scrollProperties.contentLength = e.nativeEvent.contentSize[isVertical ? 'height' : 'width'];\n    this.scrollProperties.offset = e.nativeEvent.contentOffset[isVertical ? 'y' : 'x'];\n\n    this._updateVisibleRows(e.nativeEvent.updatedChildFrames);\n\n    if (!this._maybeCallOnEndReached(e)) {\n      this._renderMoreRowsIfNeeded();\n    }\n\n    if (this.props.onEndReached && this._getDistanceFromEnd(this.scrollProperties) > this.props.onEndReachedThreshold) {\n      // Scrolled out of the end zone, so it should be able to trigger again.\n      this._sentEndForContentLength = null;\n    }\n\n    this.props.onScroll && this.props.onScroll(e);\n  }\n});\nvar _default = ListView;\nexports.default = _default;\nmodule.exports = exports.default;"]},"metadata":{},"sourceType":"script"}